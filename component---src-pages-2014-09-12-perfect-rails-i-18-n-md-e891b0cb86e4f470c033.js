(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Bl7J:function(e,t,n){"use strict";var a=n("dwav"),r=n("q1tI"),l=n.n(r),i=n("Wbzz"),o=function(e){var t=e.siteTitle;return l.a.createElement("header",{style:{background:"white",marginBottom:"1.45rem"}},l.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},l.a.createElement("h1",{style:{margin:0}},l.a.createElement(i.Link,{to:"/",style:{color:"black",textDecoration:"none"}},t))))};o.defaultProps={siteTitle:""};var c=o;n("8ypT"),t.a=function(e){var t=e.children,n=a.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement(c,{siteTitle:n.site.siteMetadata.title}),l.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0 1.0875rem 1.45rem"}},l.a.createElement("main",null,t),l.a.createElement("footer",null,"© ",(new Date).getFullYear(),", Built with"," ",l.a.createElement("a",{href:"https://www.gatsbyjs.org"},"Gatsby"),"by ",n.site.siteMetadata.author)))}},LDeC:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return l})),n.d(t,"default",(function(){return c}));n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("91GP"),n("q1tI");var a=n("7ljp"),r=n("Bl7J");var l={},i={_frontmatter:l},o=r.a;function c(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(o,Object.assign({},i,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"日本語対応のi18nの設定でエラーが発生しました。",Object(a.b)("br",{parentName:"p"}),"\n","補足ですが、私のRailsの環境は",Object(a.b)("inlineCode",{parentName:"p"},"4.1.5"),"です。  "),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-rb"}),'ActionView::Template::Error (undefined method `map\' for "translation missing: ja.date.order":String):\n    27:   </div>\n    28:   <div class="form-group">\n    29:     <%= f.label :end_time %>\n    30:     <%= f.datetime_select :end_time, start_year: now.year, end_year: now.year + 1 %>\n    31:   </div>\n    32:   <div class="form-group">\n    33:     <%= f.label :content %>\n  app/views/events/new.html.erb:30:in `block in _app_views_events_new_html_erb__622987462779560017_70179900721920\'\n  app/views/events/new.html.erb:5:in `_app_views_events_new_html_erb__622987462779560017_70179900721920\'\n\n\n  Rendered vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.5/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)\n  Rendered vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)\n  Rendered vendor/bundle/ruby/2.1.0/gems/actionpack-4.1.5/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (16.9ms)\n')),Object(a.b)("h1",null,"date.orderの指定"),Object(a.b)("h2",null,"発生箇所"),Object(a.b)("p",null,"該当するソースコードはこちらです。",Object(a.b)("br",{parentName:"p"}),"\n","ちなみに、i18nを無効化(",Object(a.b)("inlineCode",{parentName:"p"},"config.i18n.default_locale"),"を初期状態のようにコメントアウト)していると発生しません。"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{}),'  <div class="form-group">\n    <%= f.label :start_time %>\n    <%= f.datetime_select :start_time, start_year: now.year, end_year: now.year + 1 %>\n  </div>\n')),Object(a.b)("p",null,"エラーメッセージからすると、",Object(a.b)("inlineCode",{parentName:"p"},"ja.date.order"),"で翻訳に失敗しちゃったよテヘってなってるんで、ja.yml修正すれば良さそう。"),Object(a.b)("h2",null,"解決策"),Object(a.b)("p",null,"2つあります。"),Object(a.b)("p",null,Object(a.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/rails/rails/blob/a8eb6018318f65e34486da8d1860b3f0d774383d/guides/source/i18n.md#action-view-helper-methods"}),"ここ"),"に書いてありますね。"),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},"datetime_select also looks up the order option from date.order (unless you pass the option explicitly).")),Object(a.b)("h3",null,"ja.ymlに設定を追加"),Object(a.b)("p",null,"翻訳ファイルの修正です。"),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{className:"language-yaml",metastring:"config/locals/ja.yml","config/locals/ja.yml":!0}),"ja:\n  date:\n    order: \n      - :year\n      - :month\n      - :day\n")),Object(a.b)("p",null,"なお、デフォルト(en)の場合は、activesupportの設定が適用されています。"),Object(a.b)("h3",null,"datetime_selectのoptionにorderを追加"),Object(a.b)("p",null,"datetime_selectに",Object(a.b)("inlineCode",{parentName:"p"},"order"),"というoptionを追加することで、ja.ymlの修正をしないで対応できます。",Object(a.b)("br",{parentName:"p"}),"\n","優先順位は",Object(a.b)("inlineCode",{parentName:"p"},"ja.ymlで設定 < datetime_selectでoption指定"),"なので、必要があれば設定すればいいと思います。  "),Object(a.b)("pre",null,Object(a.b)("code",Object.assign({parentName:"pre"},{}),'  <div class="form-group">\n    <%= f.label :start_time %>\n    <%= f.datetime_select :start_time, start_year: now.year, end_year: now.year + 1, order: [:year, :month, :day] %>\n  </div>\n')))}c.isMDXComponent=!0},dwav:function(e){e.exports=JSON.parse('{"data":{"site":{"siteMetadata":{"title":"jangajan.com","author":"@ta1kt0me"}}}}')}}]);
//# sourceMappingURL=component---src-pages-2014-09-12-perfect-rails-i-18-n-md-e891b0cb86e4f470c033.js.map