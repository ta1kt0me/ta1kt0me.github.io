(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{Bl7J:function(e,t,n){"use strict";var l=n("dwav"),a=n("q1tI"),c=n.n(a),r=n("Wbzz"),b=function(e){var t=e.siteTitle;return c.a.createElement("header",{style:{background:"white",marginBottom:"1.45rem"}},c.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},c.a.createElement("h1",{style:{margin:0}},c.a.createElement(r.Link,{to:"/",style:{color:"black",textDecoration:"none"}},t))))};b.defaultProps={siteTitle:""};var i=b;n("8ypT"),t.a=function(e){var t=e.children,n=l.data;return c.a.createElement(c.a.Fragment,null,c.a.createElement(i,{siteTitle:n.site.siteMetadata.title}),c.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0 1.0875rem 1.45rem"}},c.a.createElement("main",null,t),c.a.createElement("footer",null,"© ",(new Date).getFullYear(),", Built with"," ",c.a.createElement("a",{href:"https://www.gatsbyjs.org"},"Gatsby"),"by ",n.site.siteMetadata.author)))}},dwav:function(e){e.exports=JSON.parse('{"data":{"site":{"siteMetadata":{"title":"jangajan.com","author":"@ta1kt0me"}}}}')},vLpr:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return i}));n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("91GP"),n("q1tI");var l=n("7ljp"),a=n("Bl7J");var c={},r={_frontmatter:c},b=a.a;function i(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,l,a={},c=Object.keys(e);for(l=0;l<c.length;l++)n=c[l],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["components"]);return Object(l.b)(b,Object.assign({},r,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Rails4アプリにNew Relicを入れます。",Object(l.b)("br",{parentName:"p"}),"\n","herokuで動かす場合はadd-onとかの設定が必要でした。"),Object(l.b)("p",null,Object(l.b)("a",Object.assign({parentName:"p"},{href:"https://docs.newrelic.com/docs/agents/ruby-agent/installation-configuration/ruby-agent-installation"}),"New Relicの本家"),"と",Object(l.b)("a",Object.assign({parentName:"p"},{href:"https://devcenter.heroku.com/articles/newrelic#ruby-configuration"}),"herokuのNew Relicの適用ページ"),"が参考になります。"),Object(l.b)("p",null,"New Relicへの登録をすませると、手順ページが表示されていきます。"),Object(l.b)("h1",null,"New Relicの設定"),Object(l.b)("h2",null,"Choose your language"),Object(l.b)("p",null,"言語をRubyに選択します。"),Object(l.b)("h2",null,"Get your license key"),Object(l.b)("p",null,"Generate license keyを単にクリックするだけです。",Object(l.b)("br",{parentName:"p"}),"\n","これで、newrelic.ymlをダウンロードできます。"),Object(l.b)("h2",null,"Install the New Relic agent with bundler"),Object(l.b)("p",null,"Gemfileの修正と、gemのインストールを実行します。"),Object(l.b)("h2",null,"Download newrelic.yml"),Object(l.b)("p",null,"license keyを生成すると、Donwload the newrelic.yml fileが有効になりますので、クリックしてファイルを取得します。\nその後、",Object(l.b)("inlineCode",{parentName:"p"},"${APP_ROOT}/config/newrelic.yml"),"にダウンロードしたファイルを配置します。"),Object(l.b)("h2",null,"アプリ名の設定"),Object(l.b)("p",null,"newrelic.ymlにアプリ名を設定します。"),Object(l.b)("pre",null,Object(l.b)("code",Object.assign({parentName:"pre"},{className:"language-yaml",metastring:"config/newrelic.yml","config/newrelic.yml":!0}),"common: &default_settings\n...\n  app_name: #{アプリケーション名}\n...\n")),Object(l.b)("h2",null,"Postgles"),Object(l.b)("p",null,"postgresqlの場合は特殊な設定が必要になります。\nなくても動きますが,New Relicの一部機能は動作しません。"),Object(l.b)("pre",null,Object(l.b)("code",Object.assign({parentName:"pre"},{className:"language-yaml",metastring:"config/newrelic.yml","config/newrelic.yml":!0}),"common: &default_settings\n  transaction_tracer:\n    explain_enabled: false\n")),Object(l.b)("h2",null,"ローカルで確認"),Object(l.b)("p",null,"この状態でローカルで確認できます。",Object(l.b)("br",{parentName:"p"}),"\n","ローカルがPostgresqlでなければ直前の対応は不要かもしれません。  "),Object(l.b)("p",null,Object(l.b)("a",Object.assign({parentName:"p"},{href:"http://localhost:3000/newrelic"}),"http://localhost:3000/newrelic")),Object(l.b)("h1",null,"herokuの設定"),Object(l.b)("p",null,"herokuではadd-onでnew relicと連携します。"),Object(l.b)("h2",null,"Add-onの設定"),Object(l.b)("p",null,"add-on追加のためにはクレジットカードの情報が必須です。\n(無料プランがあります)"),Object(l.b)("p",null,Object(l.b)("a",Object.assign({parentName:"p"},{href:"https://addons.heroku.com/newrelic"}),"New RelicのAdd-onページ"),"から設定を有効にしてください。"),Object(l.b)("h2",null,"環境変数の設定"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"heroku config"),"で設定を変更。"),Object(l.b)("pre",null,Object(l.b)("code",Object.assign({parentName:"pre"},{className:"language-sh"}),'heroku config:set NEW_RELIC_APP_NAME="各自のアプリケーション名"\nheroku config:set RACK_ENV=production\n')),Object(l.b)("h2",null,"本番で確認"),Object(l.b)("p",null,"このままherokuへのpushが成功した後、数分してからNew Relicにアクセスすれば接続確認できます。"))}i.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-2014-10-20-use-new-relic-in-rails-4-at-heroku-md-183dfa7a8cca33a0e8a5.js.map