(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{Bl7J:function(e,t,n){"use strict";var r=n("dwav"),a=n("q1tI"),i=n.n(a),o=n("Wbzz"),l=function(e){var t=e.siteTitle;return i.a.createElement("header",{style:{background:"white",marginBottom:"1.45rem"}},i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},i.a.createElement("h1",{style:{margin:0}},i.a.createElement(o.Link,{to:"/",style:{color:"black",textDecoration:"none"}},t))))};l.defaultProps={siteTitle:""};var d=l;n("8ypT"),t.a=function(e){var t=e.children,n=r.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d,{siteTitle:n.site.siteMetadata.title}),i.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0 1.0875rem 1.45rem"}},i.a.createElement("main",null,t),i.a.createElement("footer",null,"© ",(new Date).getFullYear(),", Built with"," ",i.a.createElement("a",{href:"https://www.gatsbyjs.org"},"Gatsby"),"by ",n.site.siteMetadata.author)))}},dwav:function(e){e.exports=JSON.parse('{"data":{"site":{"siteMetadata":{"title":"jangajan.com","author":"@ta1kt0me"}}}}')},qMah:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return i})),n.d(t,"default",(function(){return d}));n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("91GP"),n("q1tI");var r=n("7ljp"),a=n("Bl7J");var i={},o={_frontmatter:i},l=a.a;function d(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["components"]);return Object(r.b)(l,Object.assign({},o,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"rails generate")," したファイルにいちいちfrozen string literalのコメント追加するのは面倒ですよね。",Object(r.b)("br",{parentName:"p"}),"\n","ということでモンキーパッチ。"),Object(r.b)("p",null,"railsの5.1.0.beta1が公開されている時のmasterで試しました。\ninitializerに入れておけば動く。"),Object(r.b)("p",null,Object(r.b)("a",Object.assign({parentName:"p"},{href:"https://gist.github.com/ta1kt0me/6a7058d16621785d4f7038bde6cd3b98"}),"Add frozen string literal comment into generated files in rails v5.1.0")),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{}),"module AddFrozenStringLiteralComment\n  def add_frozen_string_literal_comment(dist)\n    if File.exist?(dist) && File.extname(dist) == '.rb'\n      File.open(dist, 'r') do |f|\n        body = f.read\n\n        File.open(dist, 'w') do |new_f|\n          new_f.write(\"# frozen_string_literal: true\\n\" + body)\n        end\n      end\n    end\n  end\nend\n\nmodule GeneratorPrepend\n  include AddFrozenStringLiteralComment\n\n  def invoke!\n    res = super\n    add_frozen_string_literal_comment(existing_migration)\n    res\n  end\nend\n\nmodule TemplatePrepend\n  include AddFrozenStringLiteralComment\n\n  def template(source, *args, &block)\n    res = super\n    add_frozen_string_literal_comment(args.first)\n    res\n  end\nend\n\nRails::Generators::Migration\nRails::Generators::Actions::CreateMigration.send :prepend, GeneratorPrepend\nRails::Generators::NamedBase.send :prepend, TemplatePrepend\n")))}d.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-2017-03-04-add-comment-for-frozen-string-literal-in-rails-generate-md-11670ad3e5f2f5e1d9c5.js.map