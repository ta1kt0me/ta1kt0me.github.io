<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Rspec | JanGaJan.com]]></title>
  <link href="http://jangajan.com/blog/categories/rspec/atom.xml" rel="self"/>
  <link href="http://jangajan.com/"/>
  <updated>2014-11-16T22:51:00+09:00</updated>
  <id>http://jangajan.com/</id>
  <author>
    <name><![CDATA[talkto_me]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rspecメモ]]></title>
    <link href="http://jangajan.com/blog/2014/10/14/rspec-memo/"/>
    <updated>2014-10-14T18:00:00+09:00</updated>
    <id>http://jangajan.com/blog/2014/10/14/rspec-memo</id>
    <content type="html"><![CDATA[<p>rspecの学習中です。</p>

<!-- more -->


<h1>rspecのワークショップ</h1>

<p>以下のチュートリアルでrspecの学習をした時のメモです。</p>

<p><a href="http://d.hatena.ne.jp/t-wada/20100228/p1">http://d.hatena.ne.jp/t-wada/20100228/p1</a>  <br/>
<a href="http://qiita.com/jnchito/items/624f6d5023c279046a1c">http://qiita.com/jnchito/items/624f6d5023c279046a1c</a></p>

<h1>describeとcontextとit</h1>

<ul>
<li><code>describe</code>は対象を説明</li>
<li><code>context</code>は状況を説明</li>
<li><code>it</code>は試験内容を説明</li>
<li><code>it</code>内に具体的な試験を記述</li>
<li><code>it</code>の引数の説明を省略しても試験内容をrspecが判断して仕様記述を組み立てる</li>
<li>読みやすさ次第で<code>it</code>の文字列引数を使うことを推奨</li>
<li>内容を確認したい時は、<code>rspec -fd specfile</code></li>
</ul>


<h1>beforeにテスト実行前処理を記述</h1>

<ul>
<li><code>before</code>の引数のデフォルトは<code>:each</code></li>
</ul>


<h1>subjectでブロックの評価結果がit内のshouldのレシーバになる</h1>

<ul>
<li>明示的に<code>it</code>内で<code>subject</code>メソッドを利用することで、<code>subject</code>ブロックの評価結果を使うことができる</li>
</ul>


<h1><code>shared_examples</code>と<code>it_behaves_like</code></h1>

<ul>
<li><code>shared_examples_for 'キー名' do ~ end</code>とするとブロック内の処理を<code>it_should_behave_like 'キー名'</code>で呼び出してテストできる</li>
<li>ただし、キー名は全てのテストで重複しないように注意する</li>
</ul>


<h1>predicateマッチャ</h1>

<ul>
<li><code>expect(xxx).to eq false -&gt; expect(xxx).not_to be_empty</code></li>
</ul>


<h1>rspec3で標準から外れた機能</h1>

<ul>
<li><code>its</code>メソッドは<code>rspec-its gem</code>で提供</li>
<li>have マッチャ

<ul>
<li>サイズのチェックをテストしやすくするマッチャ(ただし、rspec3ではgemに外出しされた)</li>
<li>have マッチャを使った場合、 <code>have(n).item</code> と <code>have(n).items</code> は互いに置換可能

<ul>
<li>nの値により自然な形にするのがいい</li>
</ul>
</li>
<li>have(n).named_collection記法でもかける

<ul>
<li><code>it {is_expected.to have(n).xxx }</code></li>
</ul>
</li>
</ul>
</li>
</ul>

]]></content>
  </entry>
  
</feed>
